<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Model-Based Optimization for mlr3 Through mlrMBO • mlrintermbo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Model-Based Optimization for mlr3 Through mlrMBO">
<meta property="og:description" content="The mlrMBO package can ordinarily not be used for optimization within mlr3, because of
  incompatibilities of their respective class systems. mlrintermbo offers a compatibility
  interface that provides mlrMBO as an mlr3tuning Tuner object, for tuning of machine
  learning algorithms within mlr3, as well as a bbotk Optimizer object for optimization
  of general objective functions using the bbotk black box optimization framework. The
  control parameters of mlrMBO are faithfully reproduced as a paradox ParamSet.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mlrintermbo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mb706/mlrintermbo/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="mlrintermbo-mlrmbo-mlr3-interface-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mlrintermbo-mlrmbo-mlr3-interface-" class="anchor"></a>mlrintermbo: mlrMBO mlr3 Interface <img src="todo-files/mlrintermbo.png" width="300" align="right">
</h1></div>

<div id="what-is-this" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-this" class="anchor"></a>What Is This?</h2>
<p>Currently, it is not possible to use <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a> for tuning <a href="https://github.com/mlr-org/mlr3">mlr3</a> and related packages directly, because of some disagreements between S3 (as used in mlrMBO) and R6 (used in mlr3). <a href="https://github.com/mlr-org/mlr3mbo/">mlr3mbo</a> exists, but it is not yet as mature and feature-rich as mlrMBO. <code>mlrintermbo</code> provides the necessary interface to make mlrMBO accessible for mlr3.</p>
<p>To use <code>mlrintermbo</code>, one should <strong>NOT</strong> load <code>mlrMBO</code> as a library in the current R session. Instead, <code>mlrintermbo</code> will run mlrMBO on a different background R session to keep it sectioned off from the main process. Just load the tuner (for tuning mlr3 “Learners”) or optimizer (for tuning bbotk “Objectives”):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/mb706/mlrintermbo">"mlrintermbo"</a></span><span class="op">)</span>

<span class="co"># Tuning Learners:</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3tuning.mlr-org.com">"mlr3tuning"</a></span><span class="op">)</span>
<span class="va">tuner</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr3tuning.mlr-org.com/reference/tnr.html">tnr</a></span><span class="op">(</span><span class="st">"intermbo"</span><span class="op">)</span>

<span class="co"># Tuning Objectives</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://bbotk.mlr-org.com">"bbotk"</a></span><span class="op">)</span>
<span class="va">optimizer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bbotk.mlr-org.com/reference/opt.html">opt</a></span><span class="op">(</span><span class="st">"intermbo"</span><span class="op">)</span></code></pre></div>
<p>The tuner / optimizer provide an <em>extensive</em> <code>ParamSet</code> to configure the MBO method, covering practically everything that can usually be configured with an <code>MBOControl</code> object. To find out the specific function of each control parameter, read the <a href="https://mlrmbo.mlr-org.com/reference/index.html">mlrMBO reference</a> entries of functions regarding “mlrMBO Control”.</p>
</div>
<div id="installing" class="section level2">
<h2 class="hasAnchor">
<a href="#installing" class="anchor"></a>Installing</h2>
<p>When installing <code>mlrintermbo</code>, the required <code>mlrMBO</code> package is not installed automatically. It is therefore necessary to install <code>mlrMBO</code> manually:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"mlrMBO"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"mlrintermbo"</span><span class="op">)</span></code></pre></div>
</div>
<div id="known-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#known-issues" class="anchor"></a>Known Issues</h2>
<ul>
<li>
<p><strong>Assertion on ‘xdt’ failed</strong> <code>r   Error in .__OptimInstance__eval_batch(self = self, private = private,  :      Assertion on 'xdt' failed: Must have at least 1 rows, but has 0 rows.</code></p>
<p>This is caused by a <a href="https://github.com/r-lib/callr/issues/184">bug in the <code>callr</code> package</a>. The bug is fixed on CRAN, installing the current versions using <code>install.packages(c("callr", "processx"))</code> should fix the issue.</p>
</li>
<li>
<p><strong>Most other errors</strong></p>
<p>Some errors, for example</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>Error<span class="op">:</span><span class="st"> </span>Domains[,<span class="dv">1</span>] must be less than or equal to Domains[,<span class="dv">2</span>]</span></code></pre></div>
<p>are caused because the surrogate model is failing. (The error above happens when the objective function is giving constant values, which the surrogate learner does not handle well). Initialize the tuner with <code>on.surrogate.error</code> set to <code>"warn"</code> or <code>"quiet"</code> to ignore errors of the surrogate model. E.g.:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tuner</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr3tuning.mlr-org.com/reference/tnr.html">tnr</a></span><span class="op">(</span><span class="st">"intermbo"</span>, on.surrogate.error <span class="op">=</span> <span class="st">"warn"</span><span class="op">)</span>  <span class="co"># alternatively "quiet"</span></code></pre></div>
</li>
</ul>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>LGPL-3</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=mlrintermbo">https://​cloud.r-project.org/​package=mlrintermbo</a>
</li>
<li>Browse source code at <br><a href="https://github.com/mb706/mlrintermbo/">https://​github.com/​mb706/​mlrintermbo/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/mb706/mlrintermbo/issues">https://​github.com/​mb706/​mlrintermbo/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Martin Binder <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mb706/mlrintermbo/actions/workflows/check.yml"><img src="https://github.com/mb706/mlrintermbo/actions/workflows/check.yml/badge.svg" alt="check"></a></li>
<li><a href="https://codecov.io/github/mb706/mlrintermbo"><img src="https://codecov.io/github/mb706/mlrintermbo/branch/master/graphs/badge.svg" alt="Coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=mlrintermbo"><img src="https://www.r-pkg.org/badges/version/mlrintermbo" alt="CRAN Status Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=mlrintermbo"><img src="https://cranlogs.r-pkg.org/badges/mlrintermbo" alt="CRAN Downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Martin Binder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
